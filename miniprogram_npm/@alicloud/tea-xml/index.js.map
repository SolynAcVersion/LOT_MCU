{"version":3,"sources":["client.js"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.js","sourcesContent":["\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst xml2js_1 = require(\"xml2js\");\nclass Client {\n    static parseXml(body, response) {\n        let ret = this._parseXML(body);\n        if (response !== null && typeof response !== 'undefined') {\n            ret = this._xmlCast(ret, response);\n        }\n        return ret;\n    }\n    static toXML(body) {\n        const builder = new xml2js_1.Builder();\n        return builder.buildObject(body);\n    }\n    static _parseXML(body) {\n        let parser = new xml2js_1.Parser({ explicitArray: false });\n        let result = {};\n        parser.parseString(body, function (err, output) {\n            result.err = err;\n            result.output = output;\n        });\n        if (result.err) {\n            throw result.err;\n        }\n        return result.output;\n    }\n    static _xmlCast(obj, clazz) {\n        obj = obj || {};\n        let ret = {};\n        let clz = clazz;\n        let names = clz.names();\n        let types = clz.types();\n        Object.keys(names).forEach((key) => {\n            let originName = names[key];\n            let value = obj[originName];\n            let type = types[key];\n            switch (type) {\n                case 'boolean':\n                    if (!value) {\n                        ret[originName] = false;\n                        return;\n                    }\n                    ret[originName] = value === 'false' ? false : true;\n                    return;\n                case 'number':\n                    if (value != 0 && !value) {\n                        ret[originName] = NaN;\n                        return;\n                    }\n                    ret[originName] = +value;\n                    return;\n                case 'string':\n                    if (!value) {\n                        ret[originName] = '';\n                        return;\n                    }\n                    ret[originName] = value.toString();\n                    return;\n                default:\n                    if (type.type === 'array') {\n                        if (!value) {\n                            ret[originName] = [];\n                            return;\n                        }\n                        if (!Array.isArray(value)) {\n                            value = [value];\n                        }\n                        if (typeof type.itemType === 'function') {\n                            ret[originName] = value.map((d) => {\n                                return this._xmlCast(d, type.itemType);\n                            });\n                        }\n                        else {\n                            ret[originName] = value;\n                        }\n                    }\n                    else if (typeof type === 'function') {\n                        if (!value) {\n                            value = {};\n                        }\n                        ret[originName] = this._xmlCast(value, type);\n                    }\n                    else {\n                        ret[originName] = value;\n                    }\n            }\n        });\n        return ret;\n    }\n}\nexports.default = Client;\n//# sourceMappingURL=client.js.map"]}