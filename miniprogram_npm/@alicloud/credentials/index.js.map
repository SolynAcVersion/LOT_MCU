{"version":3,"sources":["client.js","access_key_credential.js","default_credential.js","credential_model.js","config.js","sts_token_credential.js","ecs_ram_role_credential.js","session_credential.js","util/utils.js","ram_role_arn_credential.js","util/http.js","util/helper.js","../package.json","oidc_role_arn_credential.js","rsa_key_pair_credential.js","bearer_token_credential.js","provider/provider_chain.js","provider/environment_variable_credentials_provider.js","provider/profile_credentials_provider.js","provider/instance_ram_role_credentials_provider.js","provider/credentials_uri_provider.js","uri_credential.js","provider/oidc_role_arn_credentials_provider.js"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;ACFA,ADGA;ACFA,ADGA;ACFA,ADGA;ACFA,ADGA,AENA;ADIA,ADGA,AENA;ADIA,ADGA,AENA;ADIA,ADGA,AGTA,ADGA;ADIA,ADGA,AGTA,ADGA;ADIA,ADGA,AGTA,ADGA;ADIA,ADGA,AIZA,ADGA,ADGA;ADIA,ADGA,AIZA,ADGA,ADGA;ADIA,ADGA,AIZA,ADGA,ADGA;ADIA,ADGA,AIZA,ADGA,ADGA,AGTA;AJaA,ADGA,AIZA,ADGA,ADGA,AGTA;AJaA,ADGA,AIZA,ADGA,ADGA,AGTA;AJaA,ADGA,AIZA,ADGA,ADGA,AIZA,ADGA;AJaA,ADGA,AIZA,ADGA,ADGA,AIZA,ADGA;AJaA,ADGA,AIZA,ADGA,ADGA,AIZA,ADGA;AJaA,ADGA,AIZA,ADGA,ADGA,AIZA,ACHA,AFMA;AJaA,ADGA,AIZA,ADGA,ADGA,AIZA,ACHA,AFMA;AJaA,ADGA,AIZA,ADGA,ADGA,AIZA,ACHA,AFMA;AJaA,ADGA,AIZA,ADGA,ADGA,AIZA,ACHA,AFMA,AGTA;APsBA,ADGA,AIZA,ADGA,ADGA,AIZA,ACHA,AFMA,AGTA;APsBA,ADGA,AIZA,ADGA,ADGA,AIZA,ACHA,AFMA,AGTA;APsBA,ADGA,AIZA,ADGA,ADGA,AIZA,AGTA,AFMA,AFMA,AGTA;ARyBA,AIZA,ADGA,ADGA,AIZA,AGTA,AFMA,AFMA,AGTA;ARyBA,AIZA,ADGA,ADGA,AIZA,AGTA,AFMA,AFMA,AGTA;ARyBA,AIZA,ADGA,ADGA,AIZA,AGTA,AFMA,AFMA,AKfA,AFMA;ARyBA,AIZA,ADGA,ADGA,AIZA,AGTA,AFMA,AFMA,AKfA,AFMA;ARyBA,AIZA,ADGA,ADGA,AIZA,AGTA,AFMA,AFMA,AKfA,AFMA;ARyBA,AIZA,ADGA,ADGA,AIZA,AGTA,AFMA,AFMA,AMlBA,ADGA,AFMA;ARyBA,AIZA,ADGA,ADGA,AIZA,AGTA,AFMA,AFMA,AMlBA,ADGA,AFMA;ARyBA,AIZA,ADGA,ADGA,AIZA,AGTA,AFMA,AFMA,AMlBA,ADGA,AFMA;AIXA,AZoCA,AIZA,ADGA,ADGA,AIZA,AGTA,AFMA,AFMA,AMlBA,ADGA,AFMA;AIXA,AZoCA,AIZA,ADGA,ADGA,AIZA,AGTA,AFMA,AFMA,AMlBA,ADGA,AFMA;AIXA,AZoCA,AIZA,ADGA,ADGA,AIZA,AGTA,AFMA,AFMA,AMlBA,ADGA,AFMA;AIXA,AZoCA,AIZA,ADGA,ADGA,AIZA,AOrBA,AJYA,AFMA,AFMA,AMlBA,ADGA,AFMA;AIXA,AZoCA,AIZA,ADGA,ADGA,AIZA,AOrBA,AJYA,AFMA,AFMA,AMlBA,ADGA,AFMA;AIXA,AZoCA,AIZA,ADGA,ADGA,AIZA,AOrBA,AJYA,AFMA,AFMA,AMlBA,ADGA,AFMA;AIXA,AZoCA,AIZA,ADGA,ADGA,AIZA,AOrBA,AJYA,AKfA,APqBA,AFMA,AMlBA,ADGA,AFMA;AIXA,AZoCA,AIZA,ADGA,ADGA,AIZA,AOrBA,AJYA,AKfA,APqBA,AFMA,AMlBA,ADGA,AFMA;AIXA,AZoCA,AIZA,ADGA,ADGA,AIZA,AOrBA,AJYA,AKfA,APqBA,AIZA,ADGA,AFMA;AIXA,AGTA,Af6CA,AIZA,ADGA,ADGA,AIZA,AOrBA,AJYA,AKfA,APqBA,AIZA,ADGA,AFMA;AIXA,AGTA,Af6CA,AIZA,ADGA,ADGA,AIZA,AOrBA,AJYA,AKfA,APqBA,AIZA,ADGA,AFMA;AIXA,AGTA,Af6CA,AIZA,ADGA,AGTA,AOrBA,AJYA,AKfA,APqBA,AIZA,ADGA,AFMA;AIXA,AGTA,Af6CA,AIZA,ADGA,AGTA,AOrBA,AGTA,APqBA,AKfA,APqBA,AIZA,ADGA,AFMA;AIXA,AGTA,Af6CA,AIZA,ADGA,AGTA,AOrBA,AGTA,APqBA,AKfA,APqBA,AIZA,ADGA,AFMA;AIXA,AGTA,Af6CA,AIZA,ADGA,AGTA,AOrBA,AGTA,APqBA,AKfA,APqBA,AIZA,ADGA,AFMA;AIXA,AGTA,Af6CA,AIZA,ADGA,AGTA,AOrBA,AIZA,ADGA,APqBA,AKfA,APqBA,AIZA,ADGA,AFMA;AIXA,AGTA,Af6CA,AIZA,ADGA,AGTA,AOrBA,AIZA,ADGA,APqBA,AKfA,APqBA,AIZA,ADGA,AFMA;AIXA,AGTA,Af6CA,AIZA,ADGA,AGTA,AOrBA,AIZA,ADGA,APqBA,AKfA,APqBA,AIZA,ADGA,AFMA;AIXA,AGTA,Af6CA,AIZA,ADGA,AGTA,AOrBA,AIZA,ACHA,AFMA,APqBA,AKfA,APqBA,AIZA,ADGA,AFMA;AIXA,AGTA,Af6CA,AIZA,ADGA,AGTA,AOrBA,AIZA,ACHA,AFMA,APqBA,AKfA,APqBA,AIZA,ADGA,AFMA;AIXA,AGTA,Af6CA,AIZA,AENA,AOrBA,AIZA,ACHA,AFMA,APqBA,AKfA,APqBA,AIZA,ADGA,AFMA;AIXA,AGTA,Af6CA,AIZA,AENA,AOrBA,AIZA,AENA,ADGA,AFMA,APqBA,AKfA,APqBA,AIZA,ADGA,AFMA;AIXA,AGTA,Af6CA,AIZA,AENA,AOrBA,AIZA,AENA,ADGA,AFMA,APqBA,AKfA,APqBA,AIZA,ADGA,AFMA;AIXA,AGTA,Af6CA,AIZA,AENA,AOrBA,AIZA,AENA,ADGA,AFMA,APqBA,AKfA,APqBA,AIZA,ADGA,AFMA;AIXA,AGTA,Af6CA,AIZA,AENA,AOrBA,AOrBA,AHSA,AENA,ADGA,AFMA,APqBA,AKfA,APqBA,AIZA,ADGA,AFMA;AIXA,AGTA,Af6CA,AIZA,AENA,AOrBA,AOrBA,AHSA,AENA,ADGA,AFMA,APqBA,AKfA,APqBA,AIZA,ADGA,AFMA;AIXA,AGTA,Af6CA,AIZA,AS3BA,AOrBA,AHSA,AENA,ADGA,AFMA,APqBA,AKfA,APqBA,AIZA,ADGA,AFMA;AIXA,AGTA,Af6CA,AIZA,AS3BA,AOrBA,AHSA,AENA,ADGA,AFMA,APqBA,AKfA,APqBA,Ac1CA,AV8BA,ADGA,AFMA;AIXA,AGTA,Af6CA,AIZA,AS3BA,AOrBA,AHSA,AENA,ADGA,AFMA,APqBA,AKfA,APqBA,Ac1CA,AXiCA,AFMA;AIXA,AGTA,Af6CA,AIZA,AS3BA,AOrBA,AHSA,AENA,ADGA,AFMA,APqBA,AKfA,APqBA,Ac1CA,AXiCA,AFMA;AIXA,AZoCA,AIZA,AS3BA,AOrBA,AHSA,AENA,AGTA,AJYA,AFMA,APqBA,AKfA,APqBA,Ac1CA,AXiCA,AFMA;AIXA,AZoCA,AIZA,AS3BA,AOrBA,AHSA,AENA,AGTA,AJYA,AFMA,APqBA,AKfA,APqBA,Ac1CA,AXiCA,AFMA;AIXA,AZoCA,AIZA,AS3BA,AOrBA,AHSA,AENA,AGTA,AJYA,AFMA,APqBA,AKfA,APqBA,Ac1CA,AXiCA,AFMA;AIXA,AZoCA,AIZA,AS3BA,AOrBA,AHSA,AENA,AGTA,AJYA,AFMA,APqBA,AKfA,APqBA,Ac1CA,AXiCA,AFMA;AIXA,AZoCA,AIZA,AS3BA,AOrBA,AHSA,AENA,AGTA,AJYA,AFMA,APqBA,AKfA,APqBA,Ac1CA,AXiCA,AFMA;AIXA,AZoCA,AIZA,AS3BA,AOrBA,AHSA,AENA,AGTA,AJYA,AFMA,APqBA,AKfA,APqBA,Ac1CA,AXiCA,AFMA;AIXA,AZoCA,AIZA,AS3BA,AOrBA,AHSA,AENA,AGTA,AJYA,AFMA,APqBA,AKfA,APqBA,Ac1CA,AXiCA,AFMA;AIXA,AZoCA,AIZA,AS3BA,AOrBA,AHSA,AKfA,AJYA,AFMA,APqBA,AKfA,APqBA,Ac1CA,AXiCA,AFMA;AIXA,AZoCA,AIZA,AS3BA,AOrBA,AENA,AJYA,AFMA,APqBA,AKfA,APqBA,Ac1CA,AXiCA,AFMA;AIXA,AZoCA,AIZA,AS3BA,AOrBA,AENA,AJYA,AFMA,APqBA,AKfA,APqBA,Ac1CA,AXiCA,AFMA;AIXA,AZoCA,AIZA,AS3BA,AS3BA,AJYA,AFMA,APqBA,AKfA,APqBA,Ac1CA,AXiCA,AFMA;AIXA,AZoCA,AIZA,AS3BA,AS3BA,AJYA,AFMA,APqBA,AKfA,APqBA,Ac1CA,AXiCA,AFMA;AIXA,AZoCA,AIZA,AS3BA,AS3BA,AJYA,AJYA,APqBA,Ac1CA,AXiCA,AFMA;AIXA,AZoCA,AIZA,AS3BA,AS3BA,AJYA,AJYA,APqBA,Ac1CA,AXiCA,AFMA;AIXA,AZoCA,AIZA,AS3BA,AS3BA,AJYA,AJYA,APqBA,Ac1CA,AXiCA,AFMA;AIXA,AZoCA,AavCA,AS3BA,AJYA,AJYA,APqBA,Ac1CA,AXiCA,AFMA;AIXA,AZoCA,AavCA,AS3BA,AJYA,AJYA,APqBA,Ac1CA,AXiCA,AFMA;AIXA,AZoCA,AavCA,AS3BA,AJYA,AJYA,APqBA,Ac1CA,AXiCA,AFMA;AIXA,AZoCA,AavCA,AKfA,AJYA,APqBA,Ac1CA,AXiCA,AFMA;AIXA,AZoCA,AavCA,AKfA,AJYA,APqBA,Ac1CA,AXiCA;AELA,AZoCA,AavCA,AKfA,AJYA,APqBA,Ac1CA,AXiCA;AELA,AZoCA,AavCA,AKfA,AJYA,APqBA,Ac1CA,AXiCA;AELA,AZoCA,AavCA,AKfA,AJYA,APqBA,Ac1CA,AXiCA;AELA,AZoCA,AavCA,AKfA,AJYA,APqBA,Ac1CA,AXiCA;AELA,AZoCA,AavCA,AKfA,AJYA,APqBA,Ac1CA,AXiCA;AELA,AZoCA,AavCA,AKfA,AJYA,APqBA,Ac1CA,AXiCA;AELA,AZoCA,AavCA,AKfA,AJYA,APqBA,Ac1CA,AXiCA;AELA,AZoCA,AavCA,AKfA,AJYA,APqBA,Ac1CA,AXiCA;AV+BA,AavCA,AKfA,AJYA,APqBA,Ac1CA,AXiCA;AV+BA,AavCA,AKfA,AJYA,APqBA,Ac1CA,AXiCA;AV+BA,AavCA,AKfA,AJYA,APqBA,Ac1CA,AXiCA;AV+BA,AavCA,AKfA,AJYA,APqBA,Ac1CA,AXiCA;AGRA,AKfA,AJYA,APqBA,Ac1CA,AXiCA;AGRA,AKfA,AJYA,APqBA,Ac1CA,AXiCA;AGRA,AKfA,AJYA,APqBA,Ac1CA,AXiCA;AGRA,AKfA,AJYA,APqBA,Ac1CA,AXiCA;AGRA,AKfA,AJYA,APqBA,Ac1CA,AXiCA;AGRA,AKfA,AJYA,APqBA,Ac1CA,AXiCA;AGRA,AKfA,AXiCA,Ac1CA,AXiCA;AGRA,AKfA,AGTA,AXiCA;AGRA,AKfA,AGTA,AXiCA;AGRA,AKfA,AGTA,AXiCA;AGRA,AKfA,AGTA,AXiCA;AGRA,AKfA,AGTA,AXiCA;AGRA,AKfA,AGTA,AXiCA;AGRA,AKfA,AGTA,AXiCA;AGRA,AKfA,AGTA,AXiCA;AGRA,AKfA,AGTA,AXiCA;AGRA,AKfA,AGTA,AXiCA;AGRA,AKfA,ARwBA;AGRA,AKfA,ARwBA;AGRA,AKfA,ARwBA;AQvBA,ARwBA;AQvBA,ARwBA;AQvBA,ARwBA;AQvBA,ARwBA;AQvBA,ARwBA;AQvBA,ARwBA;AQvBA,ARwBA;AQvBA,ARwBA;AQvBA,ARwBA;AQvBA,ARwBA;AQvBA,ARwBA;AQvBA,ARwBA;AQvBA,ARwBA;AQvBA,ARwBA;AQvBA,ARwBA;AQvBA,ARwBA;AQvBA,ARwBA;AQvBA,ARwBA;AQvBA,ARwBA;AQvBA,ARwBA;AQvBA,ARwBA;AQvBA,ARwBA;AQvBA,ARwBA;AQvBA,ARwBA;AQvBA,ARwBA;AQvBA,ARwBA;AQvBA,ARwBA;AQvBA,ARwBA;AQvBA,ARwBA;AQvBA,ARwBA;AQvBA,ARwBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.js","sourcesContent":["\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Config = void 0;\nconst access_key_credential_1 = __importDefault(require(\"./access_key_credential\"));\nconst sts_token_credential_1 = __importDefault(require(\"./sts_token_credential\"));\nconst ecs_ram_role_credential_1 = __importDefault(require(\"./ecs_ram_role_credential\"));\nconst ram_role_arn_credential_1 = __importDefault(require(\"./ram_role_arn_credential\"));\nconst oidc_role_arn_credential_1 = __importDefault(require(\"./oidc_role_arn_credential\"));\nconst rsa_key_pair_credential_1 = __importDefault(require(\"./rsa_key_pair_credential\"));\nconst bearer_token_credential_1 = __importDefault(require(\"./bearer_token_credential\"));\nconst DefaultProvider = __importStar(require(\"./provider/provider_chain\"));\nconst config_1 = __importDefault(require(\"./config\"));\nexports.Config = config_1.default;\nconst uri_credential_1 = __importDefault(require(\"./uri_credential\"));\nclass Credential {\n    constructor(config = null, runtime = {}) {\n        this.load(config, runtime);\n    }\n    getAccessKeyId() {\n        return this.credential.getAccessKeyId();\n    }\n    getAccessKeySecret() {\n        return this.credential.getAccessKeySecret();\n    }\n    getSecurityToken() {\n        return this.credential.getSecurityToken();\n    }\n    getBearerToken() {\n        return this.credential.getBearerToken();\n    }\n    getType() {\n        return this.credential.getType();\n    }\n    getCredential() {\n        return this.credential.getCredential();\n    }\n    load(config, runtime) {\n        if (!config) {\n            this.credential = DefaultProvider.getCredentials();\n            return;\n        }\n        if (!config.type) {\n            throw new Error('Missing required type option');\n        }\n        switch (config.type) {\n            case 'access_key':\n                this.credential = new access_key_credential_1.default(config.accessKeyId, config.accessKeySecret);\n                break;\n            case 'sts':\n                this.credential = new sts_token_credential_1.default(config.accessKeyId, config.accessKeySecret, config.securityToken);\n                break;\n            case 'ecs_ram_role':\n                this.credential = new ecs_ram_role_credential_1.default(config.roleName);\n                break;\n            case 'ram_role_arn':\n                this.credential = new ram_role_arn_credential_1.default(config, runtime);\n                break;\n            case 'oidc_role_arn':\n                this.credential = new oidc_role_arn_credential_1.default(config, runtime);\n                break;\n            case 'rsa_key_pair':\n                this.credential = new rsa_key_pair_credential_1.default(config.publicKeyId, config.privateKeyFile);\n                break;\n            case 'bearer':\n                this.credential = new bearer_token_credential_1.default(config.bearerToken);\n                break;\n            case 'credentials_uri':\n                this.credential = new uri_credential_1.default(config.credentialsURI);\n                break;\n            default:\n                throw new Error('Invalid type option, support: access_key, sts, ecs_ram_role, ram_role_arn, rsa_key_pair, credentials_uri');\n        }\n    }\n}\nexports.default = Credential;\n//# sourceMappingURL=client.js.map","\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst default_credential_1 = __importDefault(require(\"./default_credential\"));\nconst config_1 = __importDefault(require(\"./config\"));\nclass AccessKeyCredential extends default_credential_1.default {\n    constructor(accessKeyId, accessKeySecret) {\n        if (!accessKeyId) {\n            throw new Error('Missing required accessKeyId option in config for access_key');\n        }\n        if (!accessKeySecret) {\n            throw new Error('Missing required accessKeySecret option in config for access_key');\n        }\n        const conf = new config_1.default({\n            type: 'access_key',\n            accessKeyId,\n            accessKeySecret\n        });\n        super(conf);\n    }\n}\nexports.default = AccessKeyCredential;\n//# sourceMappingURL=access_key_credential.js.map","\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst credential_model_1 = __importDefault(require(\"./credential_model\"));\nclass DefaultCredential {\n    constructor(config) {\n        this.accessKeyId = config.accessKeyId || '';\n        this.accessKeySecret = config.accessKeySecret || '';\n        this.securityToken = config.securityToken || '';\n        this.bearerToken = config.bearerToken || '';\n        this.type = config.type || '';\n    }\n    async getAccessKeyId() {\n        return this.accessKeyId;\n    }\n    async getAccessKeySecret() {\n        return this.accessKeySecret;\n    }\n    async getSecurityToken() {\n        return this.securityToken;\n    }\n    getBearerToken() {\n        return this.bearerToken;\n    }\n    getType() {\n        return this.type;\n    }\n    async getCredential() {\n        return new credential_model_1.default({\n            accessKeyId: this.accessKeyId,\n            accessKeySecret: this.accessKeySecret,\n            securityToken: this.securityToken,\n            bearerToken: this.bearerToken,\n            type: this.type,\n        });\n    }\n}\nexports.default = DefaultCredential;\n//# sourceMappingURL=default_credential.js.map","\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst $tea = __importStar(require(\"@alicloud/tea-typescript\"));\nclass CredentialModel extends $tea.Model {\n    constructor(map) {\n        super(map);\n    }\n    static names() {\n        return {\n            accessKeyId: 'accessKeyId',\n            accessKeySecret: 'accessKeySecret',\n            securityToken: 'securityToken',\n            bearerToken: 'bearerToken',\n            type: 'type',\n        };\n    }\n    static types() {\n        return {\n            accessKeyId: 'string',\n            accessKeySecret: 'string',\n            securityToken: 'string',\n            bearerToken: 'string',\n            type: 'string',\n        };\n    }\n}\nexports.default = CredentialModel;\n//# sourceMappingURL=credential_model.js.map","\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst $tea = __importStar(require(\"@alicloud/tea-typescript\"));\nclass Config extends $tea.Model {\n    constructor(config) {\n        super(config);\n    }\n    static names() {\n        return {\n            accessKeyId: 'accessKeyId',\n            accessKeySecret: 'accessKeySecret',\n            securityToken: 'securityToken',\n            bearerToken: 'bearerToken',\n            durationSeconds: 'durationSeconds',\n            roleArn: 'roleArn',\n            policy: 'policy',\n            roleSessionExpiration: 'roleSessionExpiration',\n            roleSessionName: 'roleSessionName',\n            publicKeyId: 'publicKeyId',\n            privateKeyFile: 'privateKeyFile',\n            roleName: 'roleName',\n            credentialsURI: 'credentialsURI',\n            oidcProviderArn: 'oidcProviderArn',\n            oidcTokenFilePath: 'oidcTokenFilePath',\n            type: 'type',\n        };\n    }\n    static types() {\n        return {\n            accessKeyId: 'string',\n            accessKeySecret: 'string',\n            securityToken: 'string',\n            bearerToken: 'string',\n            durationSeconds: 'number',\n            roleArn: 'string',\n            policy: 'string',\n            roleSessionExpiration: 'number',\n            roleSessionName: 'string',\n            publicKeyId: 'string',\n            privateKeyFile: 'string',\n            roleName: 'string',\n            credentialsURI: 'string',\n            oidcProviderArn: 'string',\n            oidcTokenFilePath: 'string',\n            type: 'string',\n        };\n    }\n}\nexports.default = Config;\n//# sourceMappingURL=config.js.map","\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst default_credential_1 = __importDefault(require(\"./default_credential\"));\nconst config_1 = __importDefault(require(\"./config\"));\nclass StsTokenCredential extends default_credential_1.default {\n    constructor(accessKeyId, accessKeySecret, securityToken) {\n        if (!accessKeyId) {\n            throw new Error('Missing required accessKeyId option in config for sts');\n        }\n        if (!accessKeySecret) {\n            throw new Error('Missing required accessKeySecret option in config for sts');\n        }\n        if (!securityToken) {\n            throw new Error('Missing required securityToken option in config for sts');\n        }\n        const conf = new config_1.default({\n            type: 'sts',\n            accessKeyId,\n            accessKeySecret,\n            securityToken\n        });\n        super(conf);\n    }\n}\nexports.default = StsTokenCredential;\n//# sourceMappingURL=sts_token_credential.js.map","\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst session_credential_1 = __importDefault(require(\"./session_credential\"));\nconst httpx_1 = __importDefault(require(\"httpx\"));\nconst config_1 = __importDefault(require(\"./config\"));\nconst SECURITY_CRED_URL = 'http://100.100.100.200/latest/meta-data/ram/security-credentials/';\nclass EcsRamRoleCredential extends session_credential_1.default {\n    constructor(roleName = '', runtime = {}) {\n        const conf = new config_1.default({\n            type: 'ecs_ram_role',\n        });\n        super(conf);\n        this.roleName = roleName;\n        this.runtime = runtime;\n        this.sessionCredential = null;\n    }\n    async getBody(url) {\n        const response = await httpx_1.default.request(url, {});\n        return (await httpx_1.default.read(response, 'utf8'));\n    }\n    async updateCredential() {\n        const roleName = await this.getRoleName();\n        const url = SECURITY_CRED_URL + roleName;\n        const body = await this.getBody(url);\n        const json = JSON.parse(body);\n        this.sessionCredential = {\n            AccessKeyId: json.AccessKeyId,\n            AccessKeySecret: json.AccessKeySecret,\n            Expiration: json.Expiration,\n            SecurityToken: json.SecurityToken,\n        };\n    }\n    async getRoleName() {\n        if (this.roleName && this.roleName.length) {\n            return this.roleName;\n        }\n        return await this.getBody(SECURITY_CRED_URL);\n    }\n}\nexports.default = EcsRamRoleCredential;\n//# sourceMappingURL=ecs_ram_role_credential.js.map","\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst default_credential_1 = __importDefault(require(\"./default_credential\"));\nconst utils = __importStar(require(\"./util/utils\"));\nconst config_1 = __importDefault(require(\"./config\"));\nconst credential_model_1 = __importDefault(require(\"./credential_model\"));\nclass SessionCredential extends default_credential_1.default {\n    constructor(config) {\n        const conf = new config_1.default({\n            type: config.type,\n            accessKeyId: config.accessKeyId,\n            accessKeySecret: config.accessKeySecret,\n            securityToken: config.securityToken\n        });\n        super(conf);\n        this.sessionCredential = null;\n        this.durationSeconds = config.durationSeconds || 3600;\n    }\n    async updateCredential() {\n        throw new Error('need implemented in sub-class');\n    }\n    async ensureCredential() {\n        const needUpdate = this.needUpdateCredential();\n        if (needUpdate) {\n            await this.updateCredential();\n        }\n    }\n    async getAccessKeyId() {\n        await this.ensureCredential();\n        return this.sessionCredential.AccessKeyId;\n    }\n    async getAccessKeySecret() {\n        await this.ensureCredential();\n        return this.sessionCredential.AccessKeySecret;\n    }\n    async getSecurityToken() {\n        await this.ensureCredential();\n        return this.sessionCredential.SecurityToken;\n    }\n    needUpdateCredential() {\n        if (!this.sessionCredential || !this.sessionCredential.Expiration || !this.sessionCredential.AccessKeyId || !this.sessionCredential.AccessKeySecret || !this.sessionCredential.SecurityToken) {\n            return true;\n        }\n        const expireTime = utils.timestamp(new Date(), this.durationSeconds * 0.05 * 1000);\n        if (this.sessionCredential.Expiration < expireTime) {\n            return true;\n        }\n        return false;\n    }\n    async getCredential() {\n        await this.ensureCredential();\n        return new credential_model_1.default({\n            accessKeyId: this.sessionCredential.AccessKeyId,\n            accessKeySecret: this.sessionCredential.AccessKeySecret,\n            securityToken: this.sessionCredential.SecurityToken,\n            bearerToken: this.bearerToken,\n            type: this.type,\n        });\n    }\n}\nexports.default = SessionCredential;\n//# sourceMappingURL=session_credential.js.map","\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.parseFile = exports.timestamp = void 0;\nconst ini = __importStar(require(\"ini\"));\nconst kitx = __importStar(require(\"kitx\"));\nconst fs_1 = __importDefault(require(\"fs\"));\nfunction timestamp(dateStr, timeChange) {\n    let date = new Date(dateStr);\n    if (!dateStr || isNaN(date.getTime())) {\n        date = new Date();\n    }\n    if (timeChange) {\n        date.setTime(date.getTime() + timeChange);\n    }\n    const YYYY = date.getUTCFullYear();\n    const MM = kitx.pad2(date.getUTCMonth() + 1);\n    const DD = kitx.pad2(date.getUTCDate());\n    const HH = kitx.pad2(date.getUTCHours());\n    const mm = kitx.pad2(date.getUTCMinutes());\n    const ss = kitx.pad2(date.getUTCSeconds());\n    // 删除掉毫秒部分\n    return `${YYYY}-${MM}-${DD}T${HH}:${mm}:${ss}Z`;\n}\nexports.timestamp = timestamp;\nfunction parseFile(file, ignoreErr = false) {\n    // check read permission\n    try {\n        fs_1.default.accessSync(file, fs_1.default.constants.R_OK);\n    }\n    catch (e) {\n        if (ignoreErr) {\n            return null;\n        }\n        throw new Error('Has no read permission to credentials file');\n    }\n    return ini.parse(fs_1.default.readFileSync(file, 'utf-8'));\n}\nexports.parseFile = parseFile;\n//# sourceMappingURL=utils.js.map","\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst session_credential_1 = __importDefault(require(\"./session_credential\"));\nconst http_1 = require(\"./util/http\");\nconst config_1 = __importDefault(require(\"./config\"));\nclass RamRoleArnCredential extends session_credential_1.default {\n    constructor(config, runtime = {}) {\n        if (!config.accessKeyId) {\n            throw new Error('Missing required accessKeyId option in config for ram_role_arn');\n        }\n        if (!config.accessKeySecret) {\n            throw new Error('Missing required accessKeySecret option in config for ram_role_arn');\n        }\n        if (!config.roleArn) {\n            throw new Error('Missing required roleArn option in config for ram_role_arn');\n        }\n        const conf = new config_1.default({\n            type: 'ram_role_arn',\n            accessKeyId: config.accessKeyId,\n            accessKeySecret: config.accessKeySecret,\n            securityToken: config.securityToken\n        });\n        super(conf);\n        this.roleArn = config.roleArn;\n        this.policy = config.policy;\n        this.durationSeconds = config.roleSessionExpiration || 3600;\n        this.roleSessionName = config.roleSessionName || 'role_session_name';\n        this.runtime = runtime;\n        this.host = 'https://sts.aliyuncs.com';\n    }\n    async updateCredential() {\n        const params = {\n            accessKeyId: this.accessKeyId,\n            securityToken: this.securityToken,\n            roleArn: this.roleArn,\n            action: 'AssumeRole',\n            durationSeconds: this.durationSeconds,\n            roleSessionName: this.roleSessionName\n        };\n        if (this.policy) {\n            params.policy = this.policy;\n        }\n        const json = await http_1.request(this.host, params, this.runtime, this.accessKeySecret);\n        this.sessionCredential = json.Credentials;\n    }\n}\nexports.default = RamRoleArnCredential;\n//# sourceMappingURL=ram_role_arn_credential.js.map","\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.request = void 0;\nconst httpx_1 = __importDefault(require(\"httpx\"));\nconst kitx = __importStar(require(\"kitx\"));\nconst helper = __importStar(require(\"./helper\"));\nconst utils = __importStar(require(\"./utils\"));\nconst STATUS_CODE = new Set([200, '200', 'OK', 'Success']);\nfunction firstLetterUpper(str) {\n    return str.slice(0, 1).toUpperCase() + str.slice(1);\n}\nfunction formatParams(params) {\n    const keys = Object.keys(params);\n    const newParams = {};\n    for (const key of keys) {\n        newParams[firstLetterUpper(key)] = params[key];\n    }\n    return newParams;\n}\nfunction encode(str) {\n    const result = encodeURIComponent(str);\n    return result.replace(/!/g, '%21')\n        .replace(/'/g, '%27')\n        .replace(/\\(/g, '%28')\n        .replace(/\\)/g, '%29')\n        .replace(/\\*/g, '%2A');\n}\nfunction replaceRepeatList(target, key, repeat) {\n    for (let i = 0; i < repeat.length; i++) {\n        const item = repeat[i];\n        if (item && typeof item === 'object') {\n            const keys = Object.keys(item);\n            for (const itemKey of keys) {\n                target[`${key}.${i + 1}.${itemKey}`] = item[itemKey];\n            }\n        }\n        else {\n            target[`${key}.${i + 1}`] = item;\n        }\n    }\n}\nfunction flatParams(params) {\n    const target = {};\n    const keys = Object.keys(params);\n    for (const key of keys) {\n        const value = params[key];\n        if (Array.isArray(value)) {\n            replaceRepeatList(target, key, value);\n        }\n        else {\n            target[key] = value;\n        }\n    }\n    return target;\n}\nfunction normalize(params) {\n    const list = [];\n    const flated = flatParams(params);\n    const keys = Object.keys(flated).sort();\n    for (const key of keys) {\n        const value = flated[key];\n        list.push([encode(key), encode(value)]); // push []\n    }\n    return list;\n}\nfunction canonicalize(normalized) {\n    const fields = [];\n    for (const [key, value] of normalized) {\n        fields.push(key + '=' + value);\n    }\n    return fields.join('&');\n}\nfunction _buildParams() {\n    const defaultParams = {\n        Format: 'JSON',\n        SignatureMethod: 'HMAC-SHA1',\n        SignatureNonce: kitx.makeNonce(),\n        SignatureVersion: '1.0',\n        Timestamp: utils.timestamp(),\n        Version: '2015-04-01',\n        RegionId: 'cn-hangzhou'\n    };\n    return defaultParams;\n}\nasync function request(host, params = {}, opts = {}, accessKeySecret) {\n    // 1. compose params and opts\n    let options = Object.assign({ headers: {\n            'x-sdk-client': helper.DEFAULT_CLIENT,\n            'user-agent': helper.DEFAULT_UA\n        } }, opts);\n    // format params until formatParams is false\n    if (options.formatParams !== false) {\n        params = formatParams(params);\n    }\n    params = Object.assign(Object.assign({}, _buildParams()), params);\n    // 2. calculate signature\n    const method = (opts.method || 'GET').toUpperCase();\n    const normalized = normalize(params);\n    if (!options.anonymous) {\n        const canonicalized = canonicalize(normalized);\n        // 2.1 get string to sign\n        const stringToSign = `${method}&${encode('/')}&${encode(canonicalized)}`;\n        // 2.2 get signature\n        const key = accessKeySecret + '&';\n        const signature = kitx.sha1(stringToSign, key, 'base64');\n        // add signature\n        normalized.push(['Signature', encode(signature)]);\n    }\n    // 3. generate final url\n    const url = opts.method === 'POST' ? `${host}/` : `${host}/?${canonicalize(normalized)}`;\n    // 4. send request\n    if (opts.method === 'POST') {\n        opts.headers = opts.headers || {};\n        opts.headers['content-type'] = 'application/x-www-form-urlencoded';\n        opts.data = canonicalize(normalized);\n    }\n    const response = await httpx_1.default.request(url, opts);\n    const buffer = await httpx_1.default.read(response, 'utf8');\n    const json = JSON.parse(buffer);\n    if (json.Code && !STATUS_CODE.has(json.Code)) {\n        const err = new Error(`${json.Message}`);\n        err.name = json.Code + 'Error';\n        err.data = json;\n        err.code = json.Code;\n        err.url = url;\n        throw err;\n    }\n    return json;\n}\nexports.request = request;\n//# sourceMappingURL=http.js.map","\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DEFAULT_CLIENT = exports.DEFAULT_UA = void 0;\nconst os = __importStar(require(\"os\"));\nconst package_json_1 = __importDefault(require(\"../../package.json\"));\nexports.DEFAULT_UA = `AlibabaCloud (${os.platform()}; ${os.arch()}) ` +\n    `Node.js/${process.version} Core/${package_json_1.default.version}`;\nexports.DEFAULT_CLIENT = `Node.js(${process.version}), ${package_json_1.default.name}: ${package_json_1.default.version}`;\n//# sourceMappingURL=helper.js.map","module.exports = {\n    \"name\": \"@alicloud/credentials\",\n    \"version\": \"2.3.0\",\n    \"description\": \"alibaba cloud node.js sdk credentials\",\n    \"main\": \"dist/src/client.js\",\n    \"scripts\": {\n        \"prepublishOnly\": \"tsc\",\n        \"build\": \"tsc\",\n        \"lint\": \"eslint --fix ./src --ext .ts\",\n        \"test\": \"mocha -b -r ts-node/register test/**/*.test.ts test/*.test.ts --timeout 15000\",\n        \"cov\": \"nyc -e .ts -r=html -r=text -r=lcov npm run test\",\n        \"ci\": \"npm run cov\",\n        \"test-integration\": \"mocha -b -r ts-node/register -R spec test/*.integration.ts\",\n        \"clean\": \"rm -rf coverage\"\n    },\n    \"repository\": {\n        \"type\": \"git\",\n        \"url\": \"git+https://github.com/aliyun/nodejs-credentials.git\"\n    },\n    \"keywords\": [\n        \"alibaba cloud\",\n        \"sdk\",\n        \"credentials\"\n    ],\n    \"author\": \"Alibaba Cloud SDK\",\n    \"license\": \"MIT\",\n    \"devDependencies\": {\n        \"@types/expect.js\": \"^0.3.29\",\n        \"@types/ini\": \"^1.3.30\",\n        \"@types/mocha\": \"^7.0.1\",\n        \"@types/rewire\": \"^2.5.28\",\n        \"@typescript-eslint/eslint-plugin\": \"^4.31.2\",\n        \"@typescript-eslint/parser\": \"^4.31.2\",\n        \"eslint\": \"^7.32.0\",\n        \"expect.js\": \"^0.3.1\",\n        \"mm\": \"^2.4.1\",\n        \"mocha\": \"^10.1.0\",\n        \"nyc\": \"^13.1.0\",\n        \"rewire\": \"^4.0.1\",\n        \"ts-node\": \"^8.6.2\",\n        \"typescript\": \"^3.7.5\"\n    },\n    \"dependencies\": {\n        \"@alicloud/tea-typescript\": \"^1.5.3\",\n        \"httpx\": \"^2.2.0\",\n        \"ini\": \"^1.3.5\",\n        \"kitx\": \"^2.0.0\"\n    },\n    \"bugs\": {\n        \"url\": \"https://github.com/aliyun/nodejs-credentials/issues\"\n    },\n    \"homepage\": \"https://github.com/aliyun/nodejs-credentials#readme\",\n    \"files\": [\n        \"src\",\n        \"dist\"\n    ]\n}\n","\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst session_credential_1 = __importDefault(require(\"./session_credential\"));\nconst http_1 = require(\"./util/http\");\nconst config_1 = __importDefault(require(\"./config\"));\nconst fs_1 = __importDefault(require(\"fs\"));\nclass OidcRoleArnCredential extends session_credential_1.default {\n    constructor(config, runtime = {}) {\n        if (!config.roleArn) {\n            config.roleArn = process.env.ALIBABA_CLOUD_ROLE_ARN;\n            if (!config.roleArn) {\n                throw new Error('roleArn does not exist and env ALIBABA_CLOUD_ROLE_ARN is null.');\n            }\n        }\n        if (!config.oidcProviderArn) {\n            config.oidcProviderArn = process.env.ALIBABA_CLOUD_OIDC_PROVIDER_ARN;\n            if (!config.oidcProviderArn) {\n                throw new Error('oidcProviderArn does not exist and env ALIBABA_CLOUD_OIDC_PROVIDER_ARN is null.');\n            }\n        }\n        if (!config.oidcTokenFilePath) {\n            config.oidcTokenFilePath = process.env.ALIBABA_CLOUD_OIDC_TOKEN_FILE;\n            if (!config.oidcTokenFilePath) {\n                throw new Error('oidcTokenFilePath is not exists and env ALIBABA_CLOUD_OIDC_TOKEN_FILE is null.');\n            }\n        }\n        if (!config.roleSessionName && process.env.ALIBABA_CLOUD_ROLE_SESSION_NAME) {\n            config.roleSessionName = process.env.ALIBABA_CLOUD_ROLE_SESSION_NAME;\n        }\n        const conf = new config_1.default({\n            type: 'oidc_role_arn'\n        });\n        super(conf);\n        this.oidcTokenFilePath = config.oidcTokenFilePath;\n        this.roleArn = config.roleArn;\n        this.policy = config.policy;\n        this.oidcProviderArn = config.oidcProviderArn;\n        this.durationSeconds = config.roleSessionExpiration || 3600;\n        this.roleSessionName = config.roleSessionName || 'role_session_name';\n        runtime.method = 'POST';\n        runtime.anonymous = true;\n        this.runtime = runtime;\n        this.host = 'https://sts.aliyuncs.com';\n    }\n    getOdicToken(oidcTokenFilePath) {\n        if (!fs_1.default.existsSync(oidcTokenFilePath)) {\n            throw new Error(`oidcTokenFilePath ${oidcTokenFilePath}  is not exists.`);\n        }\n        let oidcToken = null;\n        try {\n            oidcToken = fs_1.default.readFileSync(oidcTokenFilePath, 'utf-8');\n        }\n        catch (err) {\n            throw new Error(`oidcTokenFilePath ${oidcTokenFilePath} cannot be read.`);\n        }\n        return oidcToken;\n    }\n    async updateCredential() {\n        const oidcToken = this.getOdicToken(this.oidcTokenFilePath);\n        const params = {\n            Action: 'AssumeRoleWithOIDC',\n            RoleArn: this.roleArn,\n            OIDCProviderArn: this.oidcProviderArn,\n            OIDCToken: oidcToken,\n            DurationSeconds: this.durationSeconds,\n            RoleSessionName: this.roleSessionName\n        };\n        if (this.policy) {\n            params.policy = this.policy;\n        }\n        const json = await http_1.request(this.host, params, this.runtime);\n        this.sessionCredential = json.Credentials;\n    }\n}\nexports.default = OidcRoleArnCredential;\n//# sourceMappingURL=oidc_role_arn_credential.js.map","\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst fs_1 = __importDefault(require(\"fs\"));\nconst session_credential_1 = __importDefault(require(\"./session_credential\"));\nconst utils = __importStar(require(\"./util/utils\"));\nconst http_1 = require(\"./util/http\");\nconst config_1 = __importDefault(require(\"./config\"));\nconst SECURITY_CRED_URL = 'http://100.100.100.200/latest/meta-data/ram/security-credentials/';\nclass RsaKeyPairCredential extends session_credential_1.default {\n    constructor(publicKeyId, privateKeyFile) {\n        if (!publicKeyId) {\n            throw new Error('Missing required publicKeyId option in config for rsa_key_pair');\n        }\n        if (!privateKeyFile) {\n            throw new Error('Missing required privateKeyFile option in config for rsa_key_pair');\n        }\n        if (!fs_1.default.existsSync(privateKeyFile)) {\n            throw new Error(`privateKeyFile ${privateKeyFile} cannot be empty`);\n        }\n        const conf = new config_1.default({\n            type: 'rsa_key_pair'\n        });\n        super(conf);\n        this.privateKey = utils.parseFile(privateKeyFile);\n        this.publicKeyId = publicKeyId;\n    }\n    async updateCredential() {\n        const url = SECURITY_CRED_URL + this.roleName;\n        const json = await http_1.request(url, {\n            accessKeyId: this.publicKeyId,\n            action: 'GenerateSessionAccessKey',\n            durationSeconds: 3600,\n            signatureMethod: 'SHA256withRSA',\n            signatureType: 'PRIVATEKEY',\n        }, {}, this.privateKey);\n        this.sessionCredential = json.Credentials;\n    }\n}\nexports.default = RsaKeyPairCredential;\n//# sourceMappingURL=rsa_key_pair_credential.js.map","\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst default_credential_1 = __importDefault(require(\"./default_credential\"));\nconst config_1 = __importDefault(require(\"./config\"));\nclass BearerTokenCredential extends default_credential_1.default {\n    constructor(bearerToken) {\n        if (!bearerToken) {\n            throw new Error('Missing required bearerToken option in config for bearer');\n        }\n        const conf = new config_1.default({\n            type: 'bearer'\n        });\n        super(conf);\n        this.bearerToken = bearerToken;\n    }\n}\nexports.default = BearerTokenCredential;\n//# sourceMappingURL=bearer_token_credential.js.map","\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getCredentials = void 0;\nconst environment_variable_credentials_provider_1 = __importDefault(require(\"./environment_variable_credentials_provider\"));\nconst profile_credentials_provider_1 = __importDefault(require(\"./profile_credentials_provider\"));\nconst instance_ram_role_credentials_provider_1 = __importDefault(require(\"./instance_ram_role_credentials_provider\"));\nconst credentials_uri_provider_1 = __importDefault(require(\"./credentials_uri_provider\"));\nconst oidc_role_arn_credentials_provider_1 = __importDefault(require(\"./oidc_role_arn_credentials_provider\"));\nconst defaultProviders = [\n    environment_variable_credentials_provider_1.default,\n    oidc_role_arn_credentials_provider_1.default,\n    profile_credentials_provider_1.default,\n    instance_ram_role_credentials_provider_1.default,\n    credentials_uri_provider_1.default\n];\nfunction getCredentials(providers = null) {\n    const providerChain = providers || defaultProviders;\n    for (const provider of providerChain) {\n        const credential = provider.getCredential();\n        if (credential) {\n            return credential;\n        }\n    }\n    return null;\n}\nexports.getCredentials = getCredentials;\n//# sourceMappingURL=provider_chain.js.map","\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst access_key_credential_1 = __importDefault(require(\"../access_key_credential\"));\nexports.default = {\n    getCredential() {\n        const accessKeyId = process.env.ALIBABA_CLOUD_ACCESS_KEY_ID;\n        const accessKeySecret = process.env.ALIBABA_CLOUD_ACCESS_KEY_SECRET;\n        if (accessKeyId === undefined || accessKeySecret === undefined) {\n            return null;\n        }\n        if (accessKeyId === null || accessKeyId === '') {\n            throw new Error('Environment variable ALIBABA_CLOUD_ACCESS_KEY_ID cannot be empty');\n        }\n        if (accessKeySecret === null || accessKeySecret === '') {\n            throw new Error('Environment variable ALIBABA_CLOUD_ACCESS_KEY_SECRET cannot be empty');\n        }\n        return new access_key_credential_1.default(accessKeyId, accessKeySecret);\n    }\n};\n//# sourceMappingURL=environment_variable_credentials_provider.js.map","\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst access_key_credential_1 = __importDefault(require(\"../access_key_credential\"));\nconst sts_token_credential_1 = __importDefault(require(\"../sts_token_credential\"));\nconst ecs_ram_role_credential_1 = __importDefault(require(\"../ecs_ram_role_credential\"));\nconst ram_role_arn_credential_1 = __importDefault(require(\"../ram_role_arn_credential\"));\nconst oidc_role_arn_credential_1 = __importDefault(require(\"../oidc_role_arn_credential\"));\nconst rsa_key_pair_credential_1 = __importDefault(require(\"../rsa_key_pair_credential\"));\nconst bearer_token_credential_1 = __importDefault(require(\"../bearer_token_credential\"));\nconst utils = __importStar(require(\"../util/utils\"));\nconst fs_1 = __importDefault(require(\"fs\"));\nconst config_1 = __importDefault(require(\"../config\"));\nconst DEFAULT_PATH = process.env.HOME + '/.alibabacloud/credentials';\nexports.default = {\n    getCredential(credentialName = 'default') {\n        let fileContent = null;\n        const credentialFile = process.env.ALIBABA_CLOUD_CREDENTIALS_FILE;\n        if (credentialFile === undefined) {\n            if (fs_1.default.existsSync(DEFAULT_PATH)) {\n                const content = utils.parseFile(DEFAULT_PATH, true);\n                if (content) {\n                    fileContent = content;\n                }\n            }\n        }\n        else {\n            if (credentialFile === null || credentialFile === '') {\n                throw new Error('Environment variable credentialFile cannot be empty');\n            }\n            if (!fs_1.default.existsSync(credentialFile)) {\n                throw new Error(`credentialFile ${credentialFile} cannot be empty`);\n            }\n            fileContent = utils.parseFile(credentialFile);\n        }\n        if (!fileContent) {\n            return null;\n        }\n        const config = fileContent[credentialName] || {};\n        if (!config.type) {\n            throw new Error('Missing required type option in credentialFile');\n        }\n        switch (config.type) {\n            case 'access_key':\n                return new access_key_credential_1.default(config.access_key_id, config.access_key_secret);\n            case 'sts':\n                return new sts_token_credential_1.default(config.access_key_id, config.access_key_secret, config.security_token);\n            case 'ecs_ram_role':\n                return new ecs_ram_role_credential_1.default(config.role_name);\n            case 'ram_role_arn': {\n                const conf = new config_1.default({\n                    roleArn: config.role_arn,\n                    accessKeyId: config.access_key_id,\n                    accessKeySecret: config.access_key_secret\n                });\n                return new ram_role_arn_credential_1.default(conf);\n            }\n            case 'oidc_role_arn':\n                const conf = new config_1.default({\n                    roleArn: config.role_arn,\n                    oidcProviderArn: config.oidc_provider_arn,\n                    oidcTokenFilePath: config.oidc_token_file_path\n                });\n                return new oidc_role_arn_credential_1.default(conf);\n            case 'rsa_key_pair':\n                return new rsa_key_pair_credential_1.default(config.public_key_id, config.private_key_file);\n            case 'bearer':\n                return new bearer_token_credential_1.default(config.bearer_token);\n            default:\n                throw new Error('Invalid type option, support: access_key, sts, ecs_ram_role, ram_role_arn, oidc_role_arn, rsa_key_pair, bearer');\n        }\n    }\n};\n//# sourceMappingURL=profile_credentials_provider.js.map","\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ecs_ram_role_credential_1 = __importDefault(require(\"../ecs_ram_role_credential\"));\nexports.default = {\n    getCredential() {\n        const roleName = process.env.ALIBABA_CLOUD_ECS_METADATA;\n        if (roleName && roleName.length) {\n            return new ecs_ram_role_credential_1.default(roleName);\n        }\n        return null;\n    }\n};\n//# sourceMappingURL=instance_ram_role_credentials_provider.js.map","\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst uri_credential_1 = __importDefault(require(\"../uri_credential\"));\nexports.default = {\n    getCredential() {\n        const credentialsURI = process.env.ALIBABA_CLOUD_CREDENTIALS_URI;\n        if (credentialsURI) {\n            return new uri_credential_1.default(credentialsURI);\n        }\n        return null;\n    }\n};\n//# sourceMappingURL=credentials_uri_provider.js.map","\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst httpx_1 = __importDefault(require(\"httpx\"));\nconst config_1 = __importDefault(require(\"./config\"));\nconst session_credential_1 = __importDefault(require(\"./session_credential\"));\nclass URICredential extends session_credential_1.default {\n    constructor(uri) {\n        const conf = new config_1.default({\n            type: 'credentials_uri',\n            credentialsURI: uri\n        });\n        super(conf);\n        if (!uri) {\n            this.credentialsURI = process.env['ALIBABA_CLOUD_CREDENTIALS_URI'];\n        }\n        else {\n            this.credentialsURI = uri;\n        }\n        if (!this.credentialsURI) {\n            throw new Error('Missing required credentialsURI option in config or environment variable for credentials_uri');\n        }\n    }\n    async updateCredential() {\n        const url = this.credentialsURI;\n        const response = await httpx_1.default.request(url, {});\n        if (response.statusCode !== 200) {\n            throw new Error(`Get credentials from ${url} failed, status code is ${response.statusCode}`);\n        }\n        const body = (await httpx_1.default.read(response, 'utf8'));\n        let json;\n        try {\n            json = JSON.parse(body);\n        }\n        catch (ex) {\n            throw new Error(`Get credentials from ${url} failed, unmarshal response failed, JSON is: ${body}`);\n        }\n        if (json.Code !== 'Success') {\n            throw new Error(`Get credentials from ${url} failed, Code is ${json.Code}`);\n        }\n        this.sessionCredential = {\n            AccessKeyId: json.AccessKeyId,\n            AccessKeySecret: json.AccessKeySecret,\n            Expiration: json.Expiration,\n            SecurityToken: json.SecurityToken,\n        };\n    }\n}\nexports.default = URICredential;\n//# sourceMappingURL=uri_credential.js.map","\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst oidc_role_arn_credential_1 = __importDefault(require(\"../oidc_role_arn_credential\"));\nconst config_1 = __importDefault(require(\"../config\"));\nexports.default = {\n    getCredential() {\n        if (process.env.ALIBABA_CLOUD_ROLE_ARN\n            && process.env.ALIBABA_CLOUD_OIDC_PROVIDER_ARN\n            && process.env.ALIBABA_CLOUD_OIDC_TOKEN_FILE) {\n            return new oidc_role_arn_credential_1.default(new config_1.default({}));\n        }\n        return null;\n    }\n};\n//# sourceMappingURL=oidc_role_arn_credentials_provider.js.map"]}